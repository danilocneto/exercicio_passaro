var config = {
    type: Phaser.AUTO, // Define o renderizador automaticamente (WebGL ou Canvas)
    width: window.innerWidth, // Largura do jogo igual à largura da janela
    height: window.innerHeight, // Altura do jogo igual à altura da janela
    physics: { // Adiciona o sistema de física
        default: 'arcade',
        arcade: {
            gravity: { y: 500 }, // Define gravidade para simular um chão
            debug: true // Ative para ver a área de colisão do personagem
        }
    },
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

var game = new Phaser.Game(config);


var player; // variável correspondente ao player 
var ground; // variável que define o chão do game
var cursors; // Variável que declara cursor 


function preload() {
    this.load.image('background', 'assets/background.jpg'); // imaagem background do game 
    this.load.image('player', 'assets/homem.png'); // imagem sprite 
}

function create() {

    // Obtém a largura e altura da tela do jogo a partir do objeto 'this.scale'
    const {width, height} = this.scale 

    // Exibir imagem 
    this.background = this.add.image(0, 0, 'background').setOrigin(0, 0).setDisplaySize(width, height); // Ajusta ao tamanho da tela 

    // Ajustar dinamicamente o redimencionamento da tela 
    this.scale.on('resize', (gameSize) => {
        this.background.setDisplaySize(gameSize.width, gameSize.height);
    });
    
    // cria o personagem
    this.personagem = this.physics.add.sprite(400,300, "homem");
    this.personagem.setScale(0.2)
    this.personagem.setCollideWorldBounds(true);

    // Criar um chão no fundo da tela
    ground = this.physics.add.staticGroup();
    ground.create(width , height - 50).setScale(1, 0.1).refreshBody();

    // Adiciona colisão do player com o chão
    this.physics.add.collider(this.personagem, ground);

    this.cursors = this.input.keyboard.createCursorKeys(); // Captura as teclas do teclado


}

function update() {

    // Controlar os movimentos do player 
    if (cursors.left.isDown) {
        player.setVelocityX(-160); // Move para a esquerda
    } else if (cursors.right.isDown) {
        player.setVelocityX(160); // Move para a direita
    } else {
        player.setVelocityX(0); // Para quando nenhuma tecla for pressionada
    }
    
    
}
